{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/js-widget-hooks/src/dev/js-widget-hooks.js","webpack:///./src/assets/js/widgets/wp-image-attachments.js","webpack:///./src/assets/js/util/jQuery.js","webpack:///./src/assets/js/admin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","factory","debug","arguments","console","error","apply","widgetClass","widgetDataName","scriptClass","vars","registered","registeredFinalls","register","id","func","priority","this","setOptions","options","forEach","attr","undefined","init","root","wdg","k","priorityList","wdgArrays","allWidgets","that","length","sort","a","b","document","querySelector","querySelectorAll","elem","dataWidgetsAttributeName","names","dataset","successCount","split","push","classList","add","remove","widgetName","classEl","initSpecific","force","contains","e","Widgets","el","j","media_popup","$","window","jQuery","log","multiMode","data","input","find","newIds","val","index","parseInt","wp_media_post_id","wp","media","model","settings","post","set_to_post_id","on","event","preventDefault","uploader","param","frames","file_frame","title","button","text","multiple","state","frame","$el","each","indexOf","hide","previewArea","empty","image","toJSON","previewUrl","sizes","thumbnail","url","caption","filename","append","warn","join","open","onload"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","'use strict';\n\n/**\n *\tThe Widget Hooks, which allow to hook javascript execution in the following form:\n *\n *\t<div class=\"widget\" id=\"my-widget-root\" data-widgets=\"my-widget\">...</div>\n */\n(function (root, factory) {\n\n    // https://github.com/umdjs/umd/blob/master/returnExports.js\n    if (typeof module === 'object' && module.exports) {\n        // Node\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else {\n        // Browser globals (root is window)\n        root.Widgets = factory();\n    }\n}(this, function() {\n\n    // debug helper function\n    var debug = function () {\n        if (typeof(console) === 'object') {\n            arguments[0] = '[js-widget-hooks] ' + arguments[0];\n            console.error.apply(console, arguments);\n        }\n    };\n\n    // this is the Widgets Object\n    return {\n\n        widgetClass: 'widget',\n        widgetDataName: 'widgets',\n        scriptClass: 'dyn-script',\n\n        vars: {}, // place to put data\n\n        // registered widgets\n        registered: {},\n\n        // place for function calls after widget initialization\n        registeredFinalls: {},\n\n        // to register a new widget dynamically\n        // @param Number Priority\t\t\t- an optional priority in order to have control, which widget is executed first\n        register: function (id, func, priority) {\n            if (this.registered[id]) debug(\"[WARNING] Widget \" + id + \" was already registered: Override.\");\n            this.registered[id] = [func, priority];\n        },\n\n        setOptions: function (options) {\n            if (options) {\n                ['widgetClass', 'scriptClass', 'widgetDataName'].forEach(function (attr) {\n                    if (options[attr] !== undefined) {\n                        this[attr] = options[attr];\n                    }\n                }.bind(this));\n            }\n        },\n\n        /**\n         *\n         * @param {Node} [root=body] the node to initialize the widgets on\n         * @param {{}} [options]\n         */\n        init: function (root, options) {\n            var priorityList = [],\n                wdgArrays = {},\n                wdg, k, allWidgets = [],\n                that = this\n            ;\n\n            // set the options\n            this.setOptions(options);\n\n            // sort the widgets\n            for (wdg in this.registered) {\n                priorityList[priorityList.length] = [wdg, this.registered[wdg][1]]; // 1 is the priority\n                wdgArrays[wdg] = [];\n            }\n\n            priorityList.sort(function (a, b) {\n                if (a[1] !== undefined && b[1] === undefined) return -1;\n                if (a[1] === undefined && b[1] !== undefined) return 1;\n                return a[1] < b[1] ? 1 : (a[1] > b[1]) ? -1 : 0;\n            });\n\n            if (!root) root = document.querySelector('body'); // fallback to complete DOM execution, if we get not a subnode\n            if (!root) {\n                debug(\"No root element could be found - is the DOM loaded already?\");\n            }\n\n            // get all the elements of the type widget\n            /** @type {Node} elem */\n            root.querySelectorAll('.' + that.widgetClass).forEach(function (elem) {\n                var dataWidgetsAttributeName = that.widgetDataName;\n                var names = elem.dataset[dataWidgetsAttributeName];\n                var successCount = 0;\n\n                if (names) {\n                    names.split(' ').forEach(function (name) {\n                        if (wdgArrays[name] !== undefined) {\n                            wdgArrays[name].push(elem);\n                            successCount++;\n                        } else {\n                            debug(\"No method for widget \" + name + \" provided on %o\", elem);\n                            elem.classList.add(that.widgetClass + '-config-error');\n                        }\n                    });\n                } else {\n                    debug(\"missing data-\" + dataWidgetsAttributeName + \" attribute on %o\", elem);\n                    elem.classList.add(that.widgetClass + '-config-error');\n                }\n\n                // only errors, no need to check ever again this page load\n                if (!successCount) {\n                    elem.classList.remove(that.widgetClass);\n                }\n\n            });\n\n            //  and initialise them according to the priority\n            priorityList.forEach(function (wdg) {\n                var widgetName = wdg[0];\n                var cList = wdgArrays[widgetName];\n\n                cList.forEach(function (classEl) {\n                    allWidgets[allWidgets.length] = classEl;\n                    that.initSpecific(classEl, widgetName);\n                });\n\n                if (that.registeredFinalls[widgetName]) that.registeredFinalls[widgetName]();\n\n                delete wdgArrays[widgetName]; // remove the initialized array, in order to check, if something was not initialized\n            });\n\n            // delete the widget class after all executions have finished in case of multi widgets\n            for (k in allWidgets) {\n                allWidgets[k].classList.remove(this.widgetClass); // remove the class to prevent a second initialization\n            }\n        },\n\n        /**\n         *\n         * @param {Node} elem\n         * @param {string} widgetName\n         * @param {boolean} force - allows to initialize a widget also, if it was already initialized\n         * @returns {boolean}\n         */\n        initSpecific: function (elem, widgetName, force) {\n            var that = this;\n            try {\n                if (elem.classList.contains(that.widgetClass) || force) { // just in case something has changed meanwhile...\n\n                    this.registered[widgetName][0](elem);\n                    elem.classList.add(that.widgetClass + '-initialized');\n\n                }\n            } catch (e) {\n                debug(\"Error during execution of widget %o at %o:\\n%o\", widgetName, elem, e);\n                elem.classList.add(that.widgetClass + '-error');\n                return false;\n            }\n\n            return true;\n        }\n    };\n}));\n","import Widgets from 'js-widget-hooks';\nimport getJQuery from '../util/jQuery';\n\nWidgets.register('wp-image-attachments', function (el) {\n    const $ = getJQuery();\n    const elem = $(el);\n    const multiMode = elem.data('multi_select');\n    const input = elem.find('.js-trigger--ids');\n    let newIds = [];\n\n    if (input.val()) {\n        input.val().split(',').forEach(function (val, index) {\n            newIds[index] = parseInt(val);\n        })\n    }\n\n    var media_popup;\n    var wp_media_post_id = wp.media.model.settings.post.id; // Store the old id\n    var set_to_post_id = elem.data('attachment_post_id'); // Set this\n\n    // @todo add drag & drop https://alligator.io/js/drag-and-drop-vanilla-js/\n\n    elem.find('.js-trigger--upload').on('click', function( event ){\n\n        event.preventDefault();\n\n        // If the media frame already exists, reopen it.\n        if ( media_popup ) {\n            // Set the post ID to what we want\n            media_popup.uploader.uploader.param( 'post_id', set_to_post_id );\n        } else {\n            // Set the wp.media post id so the uploader grabs the ID we want when initialised\n            wp.media.model.settings.post.id = set_to_post_id;\n\n\n            // Create the media frame.\n            media_popup = wp.media.frames.file_frame = wp.media({\n                title: multiMode ? 'Select one or more images' : 'Select or Upload an image',\n                button: {\n                    text: multiMode ? 'use this images' : 'use this image',\n                },\n                multiple: multiMode\t// Set to true to allow multiple files to be selected\n            });\n\n            if (multiMode) {\n\n                media_popup.on('open', function () {\n                    // we filter out everything, that was already selected\n                    // kind of hacky fix for now\n                    media_popup.state().frame.$el.find('.attachment').each(function () {\n                        if (newIds.indexOf(parseInt($(this).data('id'))) > -1) {\n                            $(this).hide();\n                        }\n                    });\n                });\n            }\n\n            // When an image is selected, run a callback.\n            media_popup.on( 'select', function () {\n\n                const previewArea = elem.find('.image-preview-wrapper');\n\n                if (!multiMode) {\n                    previewArea.empty();\n                    newIds = [];\n                }\n\n                media_popup.state().get('selection').forEach(function (media) {\n\n                    let image = media.toJSON();\n\n                    if (newIds.indexOf(image.id) < 0) {\n                        let previewUrl = image.sizes.thumbnail.url;\n                        let title = image.caption ? image.caption : image.filename;\n\n                        previewArea.append('<span class=\"image-preview\" draggable=\"true\" data-id=\"' + image.id + '\"><img src=\"' + previewUrl + '\" title=\"' + title + '\" style=\"width: auto; height: 80px\" /></span>');\n\n                        newIds.push(image.id);\n                    } else {\n                        console.warn(\"Ignored image %o, because it is already part of the list\", image.id);\n                    }\n                });\n\n                elem.find('.js-trigger--ids').val( newIds.join(',') );\n\n                // Restore the main post ID\n                wp.media.model.settings.post.id = wp_media_post_id;\n            });\n        }\n\n        // Open frame\n        media_popup.open();\n    });\n\n    // Restore the main ID when the add media button is pressed\n    jQuery( 'a.add_media' ).on( 'click', function() {\n        wp.media.model.settings.post.id = wp_media_post_id;\n    });\n\n});","export default function getJQuery () {\n    let j;\n\n    if (typeof window.jQuery == 'function') {\n        j = window.jQuery;\n        console.log('using existing jQuery');\n    } else {\n        console.log('no jQuery available!');\n    }\n\n    return j;\n};","import Widgets from 'js-widget-hooks';\nimport './widgets/wp-image-attachments';\n\nwindow.onload = function () {\n\n    Widgets.init(document.querySelector('body'), {\n        widgetClass: 'js-widget'\n    });\n};\n"],"sourceRoot":""}